<%= form_for @product, :html => {:multipart => true} do |f| %>
    <% if @product.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:</h2>

          <ul>
            <% @product.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
            <% end %>
          </ul>
        </div>
    <% end %>

    <div class="field">
      <%= f.label :title %>
      <br/>
      <%= f.text_field :title %>
    </div>
    <div class="field">
      <%= f.label :description %>
      <br/>
      <%= f.text_area :description, :rows => 6 %>
    </div>

    <div class="field">
      <%= f.label :tags %>
      <br/>
      <% #convert tags into csv for ease of use in gui
        @csv = ''
        @product.tags.each do |tag_item|
            @csv += tag_item.name + ','
        end
        @csv = @csv.chomp(",")
      %>
      <%= text_area 'product', 'tags', :value=>@csv, :rows=>2 %>
    </div>

    <div class="field">
      <%= f.label :unit_price %>
      <br/>
      <%= f.text_field :unit_price %>
    </div>

    <div class="field">
      <%= f.label :productimage %>
      <br/>
      <%= image_tag @product.productimage_url(:thumb).to_s if @product.productimage? %>  <br/>
      <%= f.file_field :productimage %>  <br/>
      <%= f.hidden_field :productimage_cache %> <br/>
      <p>Remove product image <%= f.check_box :remove_productimage %></p>
    </div>

    <div class="field">
      <%= f.label :category_id %>
      <%= f.collection_select :category_id, Category.find(:all), :id, :title %>
      <br />
    </div>
    <div class="actions">
      <%= f.submit %>
    </div>
<% end %>
